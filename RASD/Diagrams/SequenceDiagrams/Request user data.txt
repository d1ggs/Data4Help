title Request user data

loop Login is successful
activate Third Party
activate Data4Help
Third Party->Data4Help:Login credentials
alt Valid credentials
Third Party<--Data4Help:Login ok

else Invalid credentials
Third Party<--Data4Help:Login Failed
end
end
Third Party->RequestManager:User data request
participant RequestManager
activate RequestManager
alt Existing user
alt New request
RequestManager->Request:<<Create request>>

activate Request
RequestManager<--Request:request
deactivate Request


deactivate RequestManager
RequestManager->>User:notifyUser()
activate User
activate RequestManager
RequestManager<<--User:request preference
deactivate User
RequestManager->Request:setPermission()
activate Request
RequestManager<--Request:ok
deactivate Request

deactivateafter RequestManager
else Data already requested
activate RequestManager
RequestManager->Request:request_status()
activate Request
RequestManager<--Request:return status
deactivate Request
deactivateafter RequestManager
end
activate RequestManager
alt requestStatus == accepted
RequestManager->RequestManager:fetch_data()
Third Party<--RequestManager:return user data
else requestStatus == denied
Third Party<--RequestManager:access denied
end
else User not found
Third Party<--Data4Help:user missing
end
participant User

